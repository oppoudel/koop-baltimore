<!DOCTYPE html>
<html>

<head>
  <title>Baltimore Koop-Socrata</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Righteous">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <style>
    /**
     * sticky footer styles
     */

    html {
      position: relative;
      min-height: 100%;
    }

    body {
      /* Margin bottom by footer height */
      margin-bottom: 100px;
    }

    .footer {
      position: absolute;
      bottom: 0;
      width: 100%;
      /* Set the fixed height of the footer here */
      margin-top: 40px;
      height: 60px;
      background-color: #f5f5f5;
    }
    /**
     * end sticky footer
     */

    .jumbotron {
      text-align: center;
      font-family: 'Righteous', cursive;
      font-size: 150%;
      min-height: 280px;
      border-bottom: 4px solid black;
    }

    .jumbotron a {
      color: #222;
      text-decoration: none;
    }

    .footer .text-muted {
      margin: 20px 0;
    }
  </style>
</head>

<body>
  <div class="jumbotron">
    <div class="container">
      <a href="https://koopjs.github.io/">
        <h1>Koop</h1>
      </a>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <h3>An Open Geospatial ETL Engine</h3>

        <p>Koop serves both <a href="http://geojson.org" target="_blank">GeoJSON</a> and <a href="http://maps.esri.com/apl4/sdk/rest/featureserver.html"
            target="_blank">GeoServices Feature Service</a> from shared <a href="http://gist.github.com" target="_blank">Gists</a>          and public <a href="http://github.com">GitHub</a> repositories. This allows you to Query, Map, or Analyze GeoJSON
          files just like they were a full API service.</p>

        <p>For more information, check out the <a href="https://koopjs.github.io/">documentation</a> or visit the <a href="https://github.com/koopjs">github organization</a>.</p>

        <h3>Spatial Queries</h3>

        <ul>
          <li><a href="http://koop.dc.esri.com/github/smartchicago/chicago-atlas/db::import::zipcodes/FeatureServer/0/query?geometry=-180,-90,180,90"
              target="_blank">http://koop.dc.esri.com/github/smartchicago/chicago-atlas/db::import::zipcodes/FeatureServer/0/query?geometry=-180,-90,180,90</a></li>
        </ul>

        <h3>Filter Queries</h3>

        <ul>
          <li><a href='http://koop.dc.esri.com/github/smartchicago/chicago-atlas/db::import::zipcodes/FeatureServer/0/query?where=ZIP=60647'
              target="_blank">http://koop.dc.esri.com/github/smartchicago/chicago-atlas/db::import::zipcodes/FeatureServer/0/query?where=ZIP=60647</a></li>
        </ul>

        <h3>Query parameters</h3>

        <div class="accordion" id="accordion2">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_id">
                idField*
              </a>
            </div>
            <div id="collapse_id" class="accordion-body collapse">
              <div class="accordion-inner">
                * the params is specific to koop and is not part of the FeatureService spec specifies what field to use as the ObjectID field
                <ul>
                  <li><a href="/gist/6021269/FeatureServer/0/query?idField=id">/geojson/snow/FeatureServer/0/query?idField=id</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_objectid">
                objectIds
              </a>
            </div>
            <div id="collapse_objectid" class="accordion-body collapse">
              <div class="accordion-inner">
                returns only the features that match a given objectId
                <ul>
                  <li><a href="/gist/6021269/FeatureServer/0/query?objectIds=1,2,3">/geojson/snow/FeatureServer/0/query?objectIds=1,2,3</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_returncountonly">
                returnCountOnly (true or false)
              </a>
            </div>
            <div id="collapse_returncountonly" class="accordion-body collapse">
              <div class="accordion-inner">
                if true, returns only the count of features that would be returned based on other query params
                <ul>
                  <li><a href="/gist/6021269/FeatureServer/0/query?returnCountOnly=true">/geojson/snow/FeatureServer/0/query?returnCountOnly=true</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_returnidsonly">
                returnIdsOnly (true or false)
              </a>
            </div>
            <div id="collapse_returnidsonly" class="accordion-body collapse">
              <div class="accordion-inner">
                returns only the Ids of the feature that would be returned based on other params
                <ul>
                  <li><a href="/gist/6021269/FeatureServer/0/query?returnIdsOnly=true">/geojson/snow/FeatureServer/0/query?returnIdsOnly=true</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse_geometry">
                geometry (xmin,ymin,xmax,ymax)
              </a>
            </div>
            <div id="collapse_geometry" class="accordion-body collapse">
              <div class="accordion-inner">
                sets a geometry filter and returns only features that are within the given geometry
                <ul>
                  <li><a href="/gist/6021269/FeatureServer/0/query?geometry=-110,30,-106,50">/geojson/snow/FeatureServer/0/query?geometry=-110,30,-106,50</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer class="footer">
        <div class="container">
          <p class="text-muted">Koop is a project of the <a href="http://dc.esri.com/">Esri DC R&amp;D Center.</p>
    </div>
  </footer>

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
  <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script>
    function submitGist() {
      var val = document.getElementById('gist').value;
      if (val) {
        go('/gist/' + val + '/preview');
      }
    }

    function submitGithub() {
      var val = document.getElementById('github').value.split('/');
      var user = val.shift();
      var repo = val.shift();
      if (val.length > 1) {
        var path = val.join('::');
      } else {
        var path = val[0];
      }
      if (user && repo && path) {
        go('/github/' + [user, repo, path].join('/') + '/preview');
      }
    }

    function go(path) {
      location.href = path;
    }
  </script>
</body>
</html>